#!/bin/bash
set -e

command="$1"
case "${command}" in
    deps)
        glide install
        ;;
    build)
        rm -rf bin/dojo
        (set -x; CGO_ENABLED=0 go install ./; )
        ;;
    unit)
        (set -x; go test -v ./...; )
        ;;
    itest)
        (set -x; bats ./test; )
        ;;
    *)
        echo "Invalid command: '${command}'"
        exit 1
        ;;
esac
set +e
